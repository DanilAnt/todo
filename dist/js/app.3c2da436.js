(function(t){function e(e){for(var n,s,c=e[0],a=e[1],d=e[2],l=0,b=[];l<c.length;l++)s=c[l],Object.prototype.hasOwnProperty.call(r,s)&&r[s]&&b.push(r[s][0]),r[s]=0;for(n in a)Object.prototype.hasOwnProperty.call(a,n)&&(t[n]=a[n]);u&&u(e);while(b.length)b.shift()();return i.push.apply(i,d||[]),o()}function o(){for(var t,e=0;e<i.length;e++){for(var o=i[e],n=!0,c=1;c<o.length;c++){var a=o[c];0!==r[a]&&(n=!1)}n&&(i.splice(e--,1),t=s(s.s=o[0]))}return t}var n={},r={app:0},i=[];function s(e){if(n[e])return n[e].exports;var o=n[e]={i:e,l:!1,exports:{}};return t[e].call(o.exports,o,o.exports,s),o.l=!0,o.exports}s.m=t,s.c=n,s.d=function(t,e,o){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:o})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var o=Object.create(null);if(s.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var n in t)s.d(o,n,function(e){return t[e]}.bind(null,n));return o},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],a=c.push.bind(c);c.push=e,c=c.slice();for(var d=0;d<c.length;d++)e(c[d]);var u=a;i.push([0,"chunk-vendors"]),o()})({0:function(t,e,o){t.exports=o("56d7")},3314:function(t,e,o){},"56d7":function(t,e,o){"use strict";o.r(e);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23"),r={id:"app"};function i(t,e,o,i,s,c){var a=Object(n["w"])("router-view");return Object(n["r"])(),Object(n["f"])("div",r,[Object(n["i"])(a,{onLoggedOut:c.saveTodos,onTodoAdded:c.saveTodos,onTodoEdited:c.saveTodos,onLoggedIn:c.loadTodos},null,8,["onLoggedOut","onTodoAdded","onTodoEdited","onLoggedIn"])])}var s=o("1da1"),c=(o("96cf"),o("d3b7"),{created:function(){this.$store.commit("SET_USER",localStorage.getItem("user")),this.$store.getters.USER&&this.loadTodos()},beforeUnmount:function(){this.$store.getters.USER&&this.saveTodos()},components:{},methods:{saveTodos:function(){var t={};t.todos=this.$store.getters.TODOS,t.user=this.$store.getters.USER;var e=JSON.stringify(t);console.log(e);var o=function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(){var o,n;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,fetch("saveTodos.php",{method:"POST",headers:{"Content-Type":"application/json;charset=utf-8"},mode:"cors",body:e});case 2:return o=t.sent,t.next=5,o.text();case 5:n=t.sent,console.log(n);case 7:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();o()},loadTodos:function(){var t=this,e=this.$store.getters.USER,o=function(){var o=Object(s["a"])(regeneratorRuntime.mark((function o(){var n,r;return regeneratorRuntime.wrap((function(o){while(1)switch(o.prev=o.next){case 0:return o.next=2,fetch("loadTodos.php?user=".concat(e));case 2:return n=o.sent,o.next=5,n.json();case 5:r=o.sent,console.log(r),t.$store.commit("LOAD_TODOS",r);case 8:case"end":return o.stop()}}),o)})));return function(){return o.apply(this,arguments)}}();o()},whatch:function(){var t=this;this.$store.subscribe((function(){alert(342324),t.saveTodos()}))}}});o("6545");c.render=i;var a=c,d=o("6c02"),u=(o("b0c0"),o("a4d3"),o("e01a"),{class:"main container"}),l={key:0,class:"main__inner"},b={class:"main_user"},m={key:1,class:"main__inner"},O={class:"main__table"},p={class:"main__table-collumn "},f=Object(n["g"])("h2",{class:"main__header"},"К выполнению:",-1),g={class:"main__table-collumn "},j=Object(n["g"])("h2",{class:"main__header"},"В процессе:",-1),_={class:"main__table-collumn "},h=Object(n["g"])("h2",{class:"main__header"},"Выполнено:",-1);function v(t,e,o,r,i,s){var c=Object(n["w"])("todo-card");return Object(n["r"])(),Object(n["f"])("div",u,[t.$store.getters.USER?(Object(n["r"])(),Object(n["f"])("div",l,[Object(n["g"])("div",b,"Ваши задачи, "+Object(n["y"])(t.$store.getters.USER)+":",1),Object(n["g"])("button",{class:"button",type:"submit",onClick:e[0]||(e[0]=function(){return s.logOut&&s.logOut.apply(s,arguments)})},"Выйти")])):(Object(n["r"])(),Object(n["f"])("form",m,[Object(n["D"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.user=t}),placeholder:"Введите ник"},null,512),[[n["B"],i.user]]),Object(n["g"])("button",{class:"button",type:"submit",onClick:e[2]||(e[2]=function(){return s.logIn&&s.logIn.apply(s,arguments)})},"Войти")])),Object(n["g"])("button",{type:"button",class:"main__button button",onClick:e[3]||(e[3]=function(e){return t.$router.push({name:"add"})})},"Добавить задачу"),Object(n["g"])("div",O,[Object(n["g"])("div",p,[f,(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(this.$store.getters.TODOS,(function(t,e){return Object(n["r"])(),Object(n["f"])("div",{class:"main__table-data",key:e},["К выполнению"===t.status?(Object(n["r"])(),Object(n["d"])(c,{key:0,index:e,name:t.name,description:t.description,status:t.status,img:t.img},null,8,["index","name","description","status","img"])):Object(n["e"])("",!0)])})),128))]),Object(n["g"])("div",g,[j,(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(this.$store.getters.TODOS,(function(t,e){return Object(n["r"])(),Object(n["f"])("div",{class:"main__table-data",key:e},["В процессе"===t.status?(Object(n["r"])(),Object(n["d"])(c,{key:0,index:e,name:t.name,description:t.description,status:t.status,img:t.img},null,8,["index","name","description","status","img"])):Object(n["e"])("",!0)])})),128))]),Object(n["g"])("div",_,[h,(Object(n["r"])(!0),Object(n["f"])(n["a"],null,Object(n["v"])(this.$store.getters.TODOS,(function(t,e){return Object(n["r"])(),Object(n["f"])("div",{class:"main__table-data",key:e},["Выполнено"===t.status?(Object(n["r"])(),Object(n["d"])(c,{key:0,index:e,name:t.name,description:t.description,status:t.status,img:t.img},null,8,["index","name","description","status","img"])):Object(n["e"])("",!0)])})),128))])])])}var y={class:"todo-card"},T={class:"todo-card__name"},E={class:"todo-card__description"},D={key:0,class:"todo-card__picture"},S=["src"],x={class:"todo-card__footer"};function $(t,e,o,r,i,s){return Object(n["r"])(),Object(n["f"])("div",y,[Object(n["g"])("h2",T,Object(n["y"])(o.name),1),Object(n["g"])("div",E,Object(n["y"])(o.description),1),o.img?(Object(n["r"])(),Object(n["f"])("div",D,[Object(n["g"])("img",{src:s.getImgUrl(),alt:""},null,8,S)])):Object(n["e"])("",!0),Object(n["g"])("div",x,[Object(n["g"])("button",{type:"button",class:"button todo-card__button",onClick:e[0]||(e[0]=function(e){return t.$router.push({name:"edit",params:{id:o.index}})})},"Редактировать")])])}var w={name:"TodoCard",props:["index","name","description","status","img"],methods:{getImgUrl:function(){return"/pictures/".concat(this.img)}}};o("e46e");w.render=$;var U=w,R={data:function(){return{user:""}},components:{TodoCard:U},methods:{logIn:function(){this.$store.commit("SET_USER",this.user),localStorage.setItem("user",this.user),this.$store.getters.USER&&this.$emit("loggedIn")},logOut:function(){this.$store.getters.USER&&this.$emit("loggedOut"),localStorage.clear(),this.$store.commit("CLEAR")}}};o("c300");R.render=v;var k=R,I={class:"edit-todo container"},A={class:"edit-todo__inner"},C={id:"edit-todo__form",class:"edit-todo__form"},P={class:"edit-todo__item"},L=Object(n["g"])("span",{class:"edit-todo__name"},"Наименование задачи:",-1),V=Object(n["h"])(),B={class:"edit-todo__item"},M=Object(n["g"])("span",{class:"edit-todo__name"},"Описание:",-1),F=Object(n["h"])(),J={class:"edit-todo__item"},H=Object(n["g"])("span",{class:"edit-todo__name"},"Статус:",-1),N={class:"edit-todo__input"},q=Object(n["g"])("label",{for:"for_execution"},"К выполнению",-1),z={class:"edit-todo__input"},G=Object(n["g"])("label",{for:"in_progress"},"В процессе",-1),K={class:"edit-todo__input"},Q=Object(n["g"])("label",{for:"done"},"Выполнено",-1),W={class:"edit-todo__item"},X={key:0,class:"edit-todo__message"},Y={key:1,class:"edit-todo__message"};function Z(t,e,o,r,i,s){return Object(n["r"])(),Object(n["f"])("div",I,[Object(n["g"])("div",A,[Object(n["g"])("button",{type:"button",onClick:e[0]||(e[0]=function(e){return t.$router.push({name:"main"})})},"На главную")]),Object(n["g"])("form",C,[Object(n["g"])("div",P,[L,V,Object(n["D"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.todo.name=t}),placeholder:"введите название"},null,512),[[n["B"],i.todo.name]])]),Object(n["g"])("div",B,[M,F,Object(n["D"])(Object(n["g"])("textarea",{class:"edit-todo__description",type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.todo.description=t}),placeholder:"опишите задачу"},null,512),[[n["B"],i.todo.description]])]),Object(n["g"])("div",J,[H,Object(n["g"])("div",N,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"for_execution",value:"К выполнению","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.todo.status=t})},null,512),[[n["A"],i.todo.status]]),q]),Object(n["g"])("div",z,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"in_progress",value:"В процессе","onUpdate:modelValue":e[4]||(e[4]=function(t){return i.todo.status=t})},null,512),[[n["A"],i.todo.status]]),G]),Object(n["g"])("div",K,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"done",value:"Выполнено","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.todo.status=t})},null,512),[[n["A"],i.todo.status]]),Q])]),Object(n["g"])("div",W,[Object(n["g"])("button",{type:"button",class:"edit-todo__button",onClick:e[6]||(e[6]=function(){return s.editTodo&&s.editTodo.apply(s,arguments)})},"Изменить"),Object(n["g"])("button",{type:"button",class:"edit-todo__button",onClick:e[7]||(e[7]=function(){return s.deleteTodo&&s.deleteTodo.apply(s,arguments)})},"Удалить")])]),i.isDelited?(Object(n["r"])(),Object(n["f"])("span",X,"Удалено!")):i.isEdited?(Object(n["r"])(),Object(n["f"])("span",Y,"Изменено!")):Object(n["e"])("",!0)])}var tt={data:function(){return{index:this.$route.params.id,todo:this.$store.getters.TODO(this.$route.params.id),isEdited:!1,isDelited:!1}},methods:{editTodo:function(){this.todo.id=this.index,this.$store.commit("EDIT_TODO",this.todo),this.isEdited=!0,this.$emit("todoEdited")},deleteTodo:function(){this.$store.commit("DELETE_TODO",this.index),this.isDelited=!0,this.$emit("todoEdited")},changeEditStatus:function(){this.isEdited=!1}},watch:{"todo.name":"changeEditStatus","todo.description":"changeEditStatus","todo.status":"changeEditStatus","todo.img":"changeEditStatus"}};o("65f7");tt.render=Z;var et=tt,ot={class:"add-todo container"},nt={class:"add-todo__inner"},rt={class:"add-todo__form",id:"formElem"},it={class:"add-todo__item"},st=Object(n["g"])("span",{class:"add-todo__name"},"Наименование задачи:",-1),ct=Object(n["h"])(),at={class:"add-todo__item"},dt=Object(n["g"])("span",{class:"add-todo__name"},"Описание:",-1),ut=Object(n["h"])(),lt={class:"add-todo__item"},bt=Object(n["g"])("span",{class:"add-todo__name"},"Статус:",-1),mt={class:"add-todo__input"},Ot=Object(n["g"])("label",{for:"for_execution"},"К выполнению",-1),pt={class:"add-todo__input"},ft=Object(n["g"])("label",{for:"in_progress"},"В процессе",-1),gt={class:"add-todo__input"},jt=Object(n["g"])("label",{for:"done"},"Выполнено",-1),_t={class:"add-todo__item add-todo__item--column"},ht=Object(n["g"])("div",{class:"add-todo__preview",id:"preview"},null,-1),vt=Object(n["g"])("label",{class:"add-todo__button",for:"formImage"},"Загрузите изображение",-1),yt={class:"add-todo__item"};function Tt(t,e,o,r,i,s){return Object(n["r"])(),Object(n["f"])("div",ot,[Object(n["g"])("div",nt,[Object(n["g"])("button",{type:"button",onClick:e[0]||(e[0]=function(e){return t.$router.push({name:"main"})})},"На главную")]),Object(n["g"])("form",rt,[Object(n["g"])("div",it,[st,ct,Object(n["D"])(Object(n["g"])("input",{type:"text","onUpdate:modelValue":e[1]||(e[1]=function(t){return i.form.name=t}),placeholder:"введите название"},null,512),[[n["B"],i.form.name]])]),Object(n["g"])("div",at,[dt,ut,Object(n["D"])(Object(n["g"])("textarea",{class:"add-todo__description",type:"text","onUpdate:modelValue":e[2]||(e[2]=function(t){return i.form.description=t}),placeholder:"опишите задачу"},null,512),[[n["B"],i.form.description]])]),Object(n["g"])("div",lt,[bt,Object(n["g"])("div",mt,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"for_execution",value:"К выполнению","onUpdate:modelValue":e[3]||(e[3]=function(t){return i.form.status=t})},null,512),[[n["A"],i.form.status]]),Ot]),Object(n["g"])("div",pt,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"in_progress",value:"В процессе","onUpdate:modelValue":e[4]||(e[4]=function(t){return i.form.status=t})},null,512),[[n["A"],i.form.status]]),ft]),Object(n["g"])("div",gt,[Object(n["D"])(Object(n["g"])("input",{type:"radio",id:"done",value:"Выполнено","onUpdate:modelValue":e[5]||(e[5]=function(t){return i.form.status=t})},null,512),[[n["A"],i.form.status]]),jt])]),Object(n["g"])("div",_t,[ht,Object(n["g"])("input",{class:"add-todo__input--hide",type:"file",name:"picture",id:"formImage",accept:"image/*",onChange:e[6]||(e[6]=function(){return s.showPicture&&s.showPicture.apply(s,arguments)})},null,32),vt]),Object(n["g"])("div",yt,[Object(n["g"])("button",{type:"submit",class:"main__button",onClick:e[7]||(e[7]=function(){return s.addTodo&&s.addTodo.apply(s,arguments)})},"Добавить задачу")])])])}var Et={data:function(){return{form:{name:"",description:"",status:"К выполнению",img:""},formImage:document.getElementById("formImage")}},methods:{addTodo:function(){document.getElementById("formImage").files[0]&&this.savePicture(),this.$store.commit("ADD_TODO",this.form),this.$router.push({name:"main"}),this.$emit("todoAdded")},showPicture:function(){var t=document.getElementById("preview"),e=document.getElementById("formImage"),o=e.files[0],n=new FileReader;n.onload=function(e){t.innerHTML='<img src="'.concat(e.target.result,'" alt="photo">')},n.onerror=function(t){alert("ERROR ".concat(t))},n.readAsDataURL(o)},savePicture:function(){var t=this,e=document.getElementById("formElem"),o=new FormData(e);o.append("user",this.$store.getters.USER);var n=function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,fetch("saveFile.php",{method:"POST",body:o});case 2:return n=e.sent,e.next=5,n.text();case 5:r=e.sent,t.form.img=r;case 7:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();n()}}};o("d3c1");Et.render=Tt;var Dt=Et,St=[{path:"/",name:"main",component:k},{path:"/add",name:"add",component:Dt},{path:"/edit/:id",name:"edit",component:et}],xt=Object(d["a"])({mode:"history",history:Object(d["b"])(),routes:St}),$t=xt,wt=(o("a434"),o("5502")),Ut=Object(wt["a"])({state:{todos:[],user:""},mutations:{ADD_TODO:function(t,e){t.todos.push(e)},LOAD_TODOS:function(t,e){t.todos=e},EDIT_TODO:function(t,e){var o=e.id;t.todos[o]=e},DELETE_TODO:function(t,e){var o=e;t.todos.splice(o,1)},CLEAR:function(t){t.todos=[],t.user=""},SET_USER:function(t,e){t.user=e}},getters:{TODOS:function(t){return t.todos},TODO:function(t){return function(e){return t.todos[e]}},USER:function(t){return t.user},STORE:function(t){return t}},actions:{},modules:{}});Object(n["c"])(a).use(Ut).use($t).mount("#app")},6545:function(t,e,o){"use strict";o("d53a")},"65f7":function(t,e,o){"use strict";o("d28b")},baa1:function(t,e,o){},c300:function(t,e,o){"use strict";o("3314")},d28b:function(t,e,o){},d3c1:function(t,e,o){"use strict";o("ef73")},d53a:function(t,e,o){},e46e:function(t,e,o){"use strict";o("baa1")},ef73:function(t,e,o){}});
//# sourceMappingURL=app.3c2da436.js.map
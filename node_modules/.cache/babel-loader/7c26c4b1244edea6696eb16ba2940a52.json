{"remainingRequest":"/Users/Danil/Desktop/todo/node_modules/babel-loader/lib/index.js!/Users/Danil/Desktop/todo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Users/Danil/Desktop/todo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Users/Danil/Desktop/todo/src/views/AddTodo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Users/Danil/Desktop/todo/src/views/AddTodo.vue","mtime":1630234726143},{"path":"/Users/Danil/Desktop/todo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Danil/Desktop/todo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Users/Danil/Desktop/todo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Users/Danil/Desktop/todo/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9Vc2Vycy9EYW5pbC9EZXNrdG9wL3RvZG8vbm9kZV9tb2R1bGVzL0BiYWJlbC9ydW50aW1lL2hlbHBlcnMvZXNtL2FzeW5jVG9HZW5lcmF0b3IiOwppbXBvcnQgInJlZ2VuZXJhdG9yLXJ1bnRpbWUvcnVudGltZS5qcyI7CmltcG9ydCAiY29yZS1qcy9tb2R1bGVzL2VzLm9iamVjdC50by1zdHJpbmcuanMiOwpleHBvcnQgZGVmYXVsdCB7CiAgZGF0YTogZnVuY3Rpb24gZGF0YSgpIHsKICAgIHJldHVybiB7CiAgICAgIGZvcm06IHsKICAgICAgICBuYW1lOiAiIiwKICAgICAgICBkZXNjcmlwdGlvbjogIiIsCiAgICAgICAgc3RhdHVzOiAi0Jog0LLRi9C/0L7Qu9C90LXQvdC40Y4iLAogICAgICAgIGltZzogIiIKICAgICAgfSwKICAgICAgZm9ybUltYWdlOiBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybUltYWdlIikKICAgIH07CiAgfSwKICBtZXRob2RzOiB7CiAgICBhZGRUb2RvOiBmdW5jdGlvbiBhZGRUb2RvKCkgewogICAgICBpZiAoZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoImZvcm1JbWFnZSIpLmZpbGVzWzBdKSB7CiAgICAgICAgdGhpcy5zYXZlUGljdHVyZSgpOyAvLyB0aGlzLmZvcm0uaW1nID0gdGhpcy5zYXZlUGljdHVyZSgpOwogICAgICB9CgogICAgICB0aGlzLiRzdG9yZS5jb21taXQoJ0FERF9UT0RPJywgdGhpcy5mb3JtKTsKICAgICAgdGhpcy4kcm91dGVyLnB1c2goewogICAgICAgIG5hbWU6ICdtYWluJwogICAgICB9KTsKICAgICAgdGhpcy4kZW1pdCgndG9kb0FkZGVkJyk7CiAgICB9LAogICAgc2hvd1BpY3R1cmU6IGZ1bmN0aW9uIHNob3dQaWN0dXJlKCkgewogICAgICB2YXIgY29udGFpbmVyID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoJ3ByZXZpZXcnKTsKICAgICAgdmFyIGZvcm1JbWFnZSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtSW1hZ2UiKTsKICAgICAgdmFyIGZpbGUgPSBmb3JtSW1hZ2UuZmlsZXNbMF07CiAgICAgIHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpOwoKICAgICAgcmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgY29udGFpbmVyLmlubmVySFRNTCA9ICI8aW1nIHNyYz1cIiIuY29uY2F0KGUudGFyZ2V0LnJlc3VsdCwgIlwiIGFsdD1cInBob3RvXCI+Iik7CiAgICAgIH07CgogICAgICByZWFkZXIub25lcnJvciA9IGZ1bmN0aW9uIChlKSB7CiAgICAgICAgYWxlcnQoIkVSUk9SICIuY29uY2F0KGUpKTsKICAgICAgfTsKCiAgICAgIHJlYWRlci5yZWFkQXNEYXRhVVJMKGZpbGUpOwogICAgfSwKICAgIHNhdmVQaWN0dXJlOiBmdW5jdGlvbiBzYXZlUGljdHVyZSgpIHsKICAgICAgdmFyIF90aGlzID0gdGhpczsKCiAgICAgIHZhciBmb3JtRWxlbSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdmb3JtRWxlbScpOwogICAgICB2YXIgZm9ybURhdGEgPSBuZXcgRm9ybURhdGEoZm9ybUVsZW0pOwogICAgICBmb3JtRGF0YS5hcHBlbmQoJ3VzZXInLCB0aGlzLiRzdG9yZS5nZXR0ZXJzLlVTRVIpOwoKICAgICAgdmFyIHNlbmRGb3JtID0gLyojX19QVVJFX18qL2Z1bmN0aW9uICgpIHsKICAgICAgICB2YXIgX3JlZiA9IF9hc3luY1RvR2VuZXJhdG9yKCAvKiNfX1BVUkVfXyovcmVnZW5lcmF0b3JSdW50aW1lLm1hcmsoZnVuY3Rpb24gX2NhbGxlZSgpIHsKICAgICAgICAgIHZhciByZXNwb25zZSwgcmVzdWx0OwogICAgICAgICAgcmV0dXJuIHJlZ2VuZXJhdG9yUnVudGltZS53cmFwKGZ1bmN0aW9uIF9jYWxsZWUkKF9jb250ZXh0KSB7CiAgICAgICAgICAgIHdoaWxlICgxKSB7CiAgICAgICAgICAgICAgc3dpdGNoIChfY29udGV4dC5wcmV2ID0gX2NvbnRleHQubmV4dCkgewogICAgICAgICAgICAgICAgY2FzZSAwOgogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gMjsKICAgICAgICAgICAgICAgICAgcmV0dXJuIGZldGNoKCdodHRwOi8vbG9jYWxob3N0Ojg4ODgvc2F2ZUZpbGUucGhwJywgewogICAgICAgICAgICAgICAgICAgIG1ldGhvZDogJ1BPU1QnLAogICAgICAgICAgICAgICAgICAgIGJvZHk6IGZvcm1EYXRhCiAgICAgICAgICAgICAgICAgIH0pOwoKICAgICAgICAgICAgICAgIGNhc2UgMjoKICAgICAgICAgICAgICAgICAgcmVzcG9uc2UgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICBfY29udGV4dC5uZXh0ID0gNTsKICAgICAgICAgICAgICAgICAgcmV0dXJuIHJlc3BvbnNlLnRleHQoKTsKCiAgICAgICAgICAgICAgICBjYXNlIDU6CiAgICAgICAgICAgICAgICAgIHJlc3VsdCA9IF9jb250ZXh0LnNlbnQ7CiAgICAgICAgICAgICAgICAgIF90aGlzLmZvcm0uaW1nID0gcmVzdWx0OwoKICAgICAgICAgICAgICAgIGNhc2UgNzoKICAgICAgICAgICAgICAgIGNhc2UgImVuZCI6CiAgICAgICAgICAgICAgICAgIHJldHVybiBfY29udGV4dC5zdG9wKCk7CiAgICAgICAgICAgICAgfQogICAgICAgICAgICB9CiAgICAgICAgICB9LCBfY2FsbGVlKTsKICAgICAgICB9KSk7CgogICAgICAgIHJldHVybiBmdW5jdGlvbiBzZW5kRm9ybSgpIHsKICAgICAgICAgIHJldHVybiBfcmVmLmFwcGx5KHRoaXMsIGFyZ3VtZW50cyk7CiAgICAgICAgfTsKICAgICAgfSgpOwoKICAgICAgc2VuZEZvcm0oKTsKICAgIH0KICB9Cn07"},{"version":3,"sources":["/Users/Danil/Desktop/todo/src/views/AddTodo.vue"],"names":[],"mappings":";;;AAsBA,eAAe;AACX,EAAA,IADW,kBACJ;AACH,WAAO;AACH,MAAA,IAAG,EAAI;AACH,QAAA,IAAG,EAAI,EADJ;AAEH,QAAA,WAAU,EAAI,EAFX;AAGH,QAAA,MAAK,EAAI,cAHN;AAIH,QAAA,GAAE,EAAI;AAJH,OADJ;AAOH,MAAA,SAAQ,EAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB;AAPT,KAAP;AASH,GAXU;AAYX,EAAA,OAAM,EAAI;AACN,IAAA,OADM,qBACI;AACN,UAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB,EAAqC,KAArC,CAA2C,CAA3C,CAAJ,EAAmD;AAC/C,aAAK,WAAL,GAD+C,CAE/C;AACJ;;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB,UAAnB,EAA+B,KAAK,IAApC;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAC,QAAA,IAAG,EAAI;AAAR,OAAlB;AACA,WAAK,KAAL,CAAW,WAAX;AACH,KATK;AAUN,IAAA,WAVM,yBAUQ;AACV,UAAM,SAAQ,GAAI,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAlB;AACA,UAAM,SAAQ,GAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB,CAAlB;AACA,UAAI,IAAG,GAAI,SAAS,CAAC,KAAV,CAAgB,CAAhB,CAAX;AACA,UAAI,MAAK,GAAI,IAAI,UAAJ,EAAb;;AACA,MAAA,MAAM,CAAC,MAAP,GAAgB,UAAU,CAAV,EAAa;AACzB,QAAA,SAAS,CAAC,SAAV,wBAAmC,CAAC,CAAC,MAAF,CAAS,MAA5C;AACJ,OAFA;;AAGA,MAAA,MAAM,CAAC,OAAP,GAAiB,UAAS,CAAT,EAAW;AACxB,QAAA,KAAK,iBAAU,CAAV,EAAL;AACJ,OAFA;;AAGA,MAAA,MAAM,CAAC,aAAP,CAAqB,IAArB;AACH,KAtBK;AAuBN,IAAA,WAvBM,yBAuBQ;AAAA;;AACV,UAAM,QAAO,GAAI,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAjB;AACA,UAAM,QAAO,GAAI,IAAI,QAAJ,CAAa,QAAb,CAAjB;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAA5C;;AACA,UAAI,QAAO;AAAA,2EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACU,KAAK,CAAC,oCAAD,EAAuC;AAC7D,oBAAA,MAAM,EAAE,MADqD;AAE7D,oBAAA,IAAI,EAAE;AAFuD,mBAAvC,CADf;;AAAA;AACP,kBAAA,QADO;AAAA;AAAA,yBAKQ,QAAQ,CAAC,IAAT,EALR;;AAAA;AAKP,kBAAA,MALO;AAOX,kBAAA,KAAI,CAAC,IAAL,CAAU,GAAV,GAAgB,MAAhB;;AAPW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAJ;;AAAA,wBAAP,QAAO;AAAA;AAAA;AAAA,SAAX;;AASA,MAAA,QAAQ;AACZ;AArCM;AAZC,CAAf","sourcesContent":["<template>\n    <div class=\"add-todo\">\n         <button type=\"button\" @click=\"$router.push({name : 'main'})\">На главную</button>\n        <form class=\"add-todo__form\" id=\"formElem\">\n            Наименование задачи: <input type=\"text\" v-model=\"form.name\" placeholder=\"введите название\">\n            Описание: <input type=\"text\" v-model=\"form.description\" placeholder=\"опишите задачу\">\n            Статус: \n            <input type=\"radio\" id=\"for_execution\" value=\"К выполнению\" v-model=\"form.status\">  \n            <label for=\"for_execution\">К выполнению</label>\n            <input type=\"radio\" id=\"in_progress\" value=\"В процессе\" v-model=\"form.status\"> \n            <label for=\"in_progress\">В процессе</label>\n            <input type=\"radio\" id=\"done\" value=\"Выполнено\" v-model=\"form.status\"> \n            <label for=\"done\">Выполнено</label>\n            <input type=\"file\" name=\"picture\" id=\"formImage\" accept=\"image/*\" @change=\"showPicture\">\n            <div class=\"add-todo__preview\" id=\"preview\"></div>\n            <button type=\"submit\" class=\"main__button\" @click=\"addTodo\">Добавить задачу</button>\n        </form>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    data() {\n        return {\n            form : {\n                name : \"\",\n                description : \"\",\n                status : \"К выполнению\",\n                img : \"\"\n            },\n            formImage : document.getElementById(\"formImage\"),\n        }\n    },\n    methods : {\n        addTodo() {\n            if (document.getElementById(\"formImage\").files[0]) {\n                this.savePicture();\n                // this.form.img = this.savePicture();\n            }\n            this.$store.commit('ADD_TODO', this.form);\n            this.$router.push({name : 'main'});\n            this.$emit('todoAdded');\n        },\n        showPicture() {\n            const container = document.getElementById('preview');\n            const formImage = document.getElementById(\"formImage\");\n            let file = formImage.files[0];\n            let reader = new FileReader();\n            reader.onload = function (e) {\n                container.innerHTML = `<img src=\"${e.target.result}\" alt=\"photo\">`;\n            }\n            reader.onerror = function(e){\n                alert(`ERROR ${e}`);\n            }\n            reader.readAsDataURL(file);\n        },\n        savePicture() {\n            const formElem = document.getElementById('formElem');\n            const formData = new FormData(formElem);\n            formData.append('user', this.$store.getters.USER);\n            let sendForm = async () => {\n                let response = await fetch('http://localhost:8888/saveFile.php', {\n                    method: 'POST',\n                    body: formData\n                });\n                let result = await response.text();\n                \n                this.form.img = result;\n            }\n            sendForm();\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}
{"remainingRequest":"/Applications/MAMP/htdocs/todo/node_modules/babel-loader/lib/index.js!/Applications/MAMP/htdocs/todo/node_modules/cache-loader/dist/cjs.js??ref--0-0!/Applications/MAMP/htdocs/todo/node_modules/vue-loader-v16/dist/index.js??ref--0-1!/Applications/MAMP/htdocs/todo/src/views/AddTodo.vue?vue&type=script&lang=js","dependencies":[{"path":"/Applications/MAMP/htdocs/todo/src/views/AddTodo.vue","mtime":1630233894994},{"path":"/Applications/MAMP/htdocs/todo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/todo/node_modules/babel-loader/lib/index.js","mtime":315532800000},{"path":"/Applications/MAMP/htdocs/todo/node_modules/cache-loader/dist/cjs.js","mtime":499162500000},{"path":"/Applications/MAMP/htdocs/todo/node_modules/vue-loader-v16/dist/index.js","mtime":1628298225000}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:aW1wb3J0IF9hc3luY1RvR2VuZXJhdG9yIGZyb20gIi9BcHBsaWNhdGlvbnMvTUFNUC9odGRvY3MvdG9kby9ub2RlX21vZHVsZXMvQGJhYmVsL3J1bnRpbWUvaGVscGVycy9lc20vYXN5bmNUb0dlbmVyYXRvciI7CmltcG9ydCAicmVnZW5lcmF0b3ItcnVudGltZS9ydW50aW1lLmpzIjsKaW1wb3J0ICJjb3JlLWpzL21vZHVsZXMvZXMub2JqZWN0LnRvLXN0cmluZy5qcyI7CmV4cG9ydCBkZWZhdWx0IHsKICBkYXRhOiBmdW5jdGlvbiBkYXRhKCkgewogICAgcmV0dXJuIHsKICAgICAgZm9ybTogewogICAgICAgIG5hbWU6ICIiLAogICAgICAgIGRlc2NyaXB0aW9uOiAiIiwKICAgICAgICBzdGF0dXM6ICLQmiDQstGL0L/QvtC70L3QtdC90LjRjiIsCiAgICAgICAgaW1nOiAiIgogICAgICB9LAogICAgICBmb3JtSW1hZ2U6IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJmb3JtSW1hZ2UiKQogICAgfTsKICB9LAogIG1ldGhvZHM6IHsKICAgIGFkZFRvZG86IGZ1bmN0aW9uIGFkZFRvZG8oKSB7CiAgICAgIGlmIChkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybUltYWdlIikuZmlsZXNbMF0pIHsKICAgICAgICB0aGlzLnNhdmVQaWN0dXJlKCk7IC8vIHRoaXMuZm9ybS5pbWcgPSB0aGlzLnNhdmVQaWN0dXJlKCk7CiAgICAgIH0KCiAgICAgIHRoaXMuJHN0b3JlLmNvbW1pdCgnQUREX1RPRE8nLCB0aGlzLmZvcm0pOwogICAgICB0aGlzLiRyb3V0ZXIucHVzaCh7CiAgICAgICAgbmFtZTogJ21haW4nCiAgICAgIH0pOwogICAgfSwKICAgIHNob3dQaWN0dXJlOiBmdW5jdGlvbiBzaG93UGljdHVyZSgpIHsKICAgICAgdmFyIGNvbnRhaW5lciA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCdwcmV2aWV3Jyk7CiAgICAgIHZhciBmb3JtSW1hZ2UgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgiZm9ybUltYWdlIik7CiAgICAgIHZhciBmaWxlID0gZm9ybUltYWdlLmZpbGVzWzBdOwogICAgICB2YXIgcmVhZGVyID0gbmV3IEZpbGVSZWFkZXIoKTsKCiAgICAgIHJlYWRlci5vbmxvYWQgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGNvbnRhaW5lci5pbm5lckhUTUwgPSAiPGltZyBzcmM9XCIiLmNvbmNhdChlLnRhcmdldC5yZXN1bHQsICJcIiBhbHQ9XCJwaG90b1wiPiIpOwogICAgICB9OwoKICAgICAgcmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbiAoZSkgewogICAgICAgIGFsZXJ0KCJFUlJPUiAiLmNvbmNhdChlKSk7CiAgICAgIH07CgogICAgICByZWFkZXIucmVhZEFzRGF0YVVSTChmaWxlKTsKICAgIH0sCiAgICBzYXZlUGljdHVyZTogZnVuY3Rpb24gc2F2ZVBpY3R1cmUoKSB7CiAgICAgIHZhciBfdGhpcyA9IHRoaXM7CgogICAgICB2YXIgZm9ybUVsZW0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgnZm9ybUVsZW0nKTsKICAgICAgdmFyIGZvcm1EYXRhID0gbmV3IEZvcm1EYXRhKGZvcm1FbGVtKTsKICAgICAgZm9ybURhdGEuYXBwZW5kKCd1c2VyJywgdGhpcy4kc3RvcmUuZ2V0dGVycy5VU0VSKTsKCiAgICAgIHZhciBzZW5kRm9ybSA9IC8qI19fUFVSRV9fKi9mdW5jdGlvbiAoKSB7CiAgICAgICAgdmFyIF9yZWYgPSBfYXN5bmNUb0dlbmVyYXRvciggLyojX19QVVJFX18qL3JlZ2VuZXJhdG9yUnVudGltZS5tYXJrKGZ1bmN0aW9uIF9jYWxsZWUoKSB7CiAgICAgICAgICB2YXIgcmVzcG9uc2UsIHJlc3VsdDsKICAgICAgICAgIHJldHVybiByZWdlbmVyYXRvclJ1bnRpbWUud3JhcChmdW5jdGlvbiBfY2FsbGVlJChfY29udGV4dCkgewogICAgICAgICAgICB3aGlsZSAoMSkgewogICAgICAgICAgICAgIHN3aXRjaCAoX2NvbnRleHQucHJldiA9IF9jb250ZXh0Lm5leHQpIHsKICAgICAgICAgICAgICAgIGNhc2UgMDoKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDI7CiAgICAgICAgICAgICAgICAgIHJldHVybiBmZXRjaCgnaHR0cDovL2xvY2FsaG9zdDo4ODg4L3NhdmVGaWxlLnBocCcsIHsKICAgICAgICAgICAgICAgICAgICBtZXRob2Q6ICdQT1NUJywKICAgICAgICAgICAgICAgICAgICBib2R5OiBmb3JtRGF0YQogICAgICAgICAgICAgICAgICB9KTsKCiAgICAgICAgICAgICAgICBjYXNlIDI6CiAgICAgICAgICAgICAgICAgIHJlc3BvbnNlID0gX2NvbnRleHQuc2VudDsKICAgICAgICAgICAgICAgICAgX2NvbnRleHQubmV4dCA9IDU7CiAgICAgICAgICAgICAgICAgIHJldHVybiByZXNwb25zZS50ZXh0KCk7CgogICAgICAgICAgICAgICAgY2FzZSA1OgogICAgICAgICAgICAgICAgICByZXN1bHQgPSBfY29udGV4dC5zZW50OwogICAgICAgICAgICAgICAgICBfdGhpcy5mb3JtLmltZyA9IHJlc3VsdDsKCiAgICAgICAgICAgICAgICBjYXNlIDc6CiAgICAgICAgICAgICAgICBjYXNlICJlbmQiOgogICAgICAgICAgICAgICAgICByZXR1cm4gX2NvbnRleHQuc3RvcCgpOwogICAgICAgICAgICAgIH0KICAgICAgICAgICAgfQogICAgICAgICAgfSwgX2NhbGxlZSk7CiAgICAgICAgfSkpOwoKICAgICAgICByZXR1cm4gZnVuY3Rpb24gc2VuZEZvcm0oKSB7CiAgICAgICAgICByZXR1cm4gX3JlZi5hcHBseSh0aGlzLCBhcmd1bWVudHMpOwogICAgICAgIH07CiAgICAgIH0oKTsKCiAgICAgIHNlbmRGb3JtKCk7CiAgICB9CiAgfQp9Ow=="},{"version":3,"sources":["/Applications/MAMP/htdocs/todo/src/views/AddTodo.vue"],"names":[],"mappings":";;;AAsBA,eAAe;AACX,EAAA,IADW,kBACJ;AACH,WAAO;AACH,MAAA,IAAG,EAAI;AACH,QAAA,IAAG,EAAI,EADJ;AAEH,QAAA,WAAU,EAAI,EAFX;AAGH,QAAA,MAAK,EAAI,cAHN;AAIH,QAAA,GAAE,EAAI;AAJH,OADJ;AAOH,MAAA,SAAQ,EAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB;AAPT,KAAP;AASH,GAXU;AAYX,EAAA,OAAM,EAAI;AACN,IAAA,OADM,qBACI;AACN,UAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB,EAAqC,KAArC,CAA2C,CAA3C,CAAJ,EAAmD;AAC/C,aAAK,WAAL,GAD+C,CAE/C;AACJ;;AACA,WAAK,MAAL,CAAY,MAAZ,CAAmB,UAAnB,EAA+B,KAAK,IAApC;AACA,WAAK,OAAL,CAAa,IAAb,CAAkB;AAAC,QAAA,IAAG,EAAI;AAAR,OAAlB;AACH,KARK;AASN,IAAA,WATM,yBASQ;AACV,UAAM,SAAQ,GAAI,QAAQ,CAAC,cAAT,CAAwB,SAAxB,CAAlB;AACA,UAAM,SAAQ,GAAI,QAAQ,CAAC,cAAT,CAAwB,WAAxB,CAAlB;AACA,UAAI,IAAG,GAAI,SAAS,CAAC,KAAV,CAAgB,CAAhB,CAAX;AACA,UAAI,MAAK,GAAI,IAAI,UAAJ,EAAb;;AACA,MAAA,MAAM,CAAC,MAAP,GAAgB,UAAU,CAAV,EAAa;AACzB,QAAA,SAAS,CAAC,SAAV,wBAAmC,CAAC,CAAC,MAAF,CAAS,MAA5C;AACJ,OAFA;;AAGA,MAAA,MAAM,CAAC,OAAP,GAAiB,UAAS,CAAT,EAAW;AACxB,QAAA,KAAK,iBAAU,CAAV,EAAL;AACJ,OAFA;;AAGA,MAAA,MAAM,CAAC,aAAP,CAAqB,IAArB;AACH,KArBK;AAsBN,IAAA,WAtBM,yBAsBQ;AAAA;;AACV,UAAM,QAAO,GAAI,QAAQ,CAAC,cAAT,CAAwB,UAAxB,CAAjB;AACA,UAAM,QAAO,GAAI,IAAI,QAAJ,CAAa,QAAb,CAAjB;AACA,MAAA,QAAQ,CAAC,MAAT,CAAgB,MAAhB,EAAwB,KAAK,MAAL,CAAY,OAAZ,CAAoB,IAA5C;;AACA,UAAI,QAAO;AAAA,2EAAI;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,yBACU,KAAK,CAAC,oCAAD,EAAuC;AAC7D,oBAAA,MAAM,EAAE,MADqD;AAE7D,oBAAA,IAAI,EAAE;AAFuD,mBAAvC,CADf;;AAAA;AACP,kBAAA,QADO;AAAA;AAAA,yBAKQ,QAAQ,CAAC,IAAT,EALR;;AAAA;AAKP,kBAAA,MALO;AAOX,kBAAA,KAAI,CAAC,IAAL,CAAU,GAAV,GAAgB,MAAhB;;AAPW;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,SAAJ;;AAAA,wBAAP,QAAO;AAAA;AAAA;AAAA,SAAX;;AASA,MAAA,QAAQ;AACZ;AApCM;AAZC,CAAf","sourcesContent":["<template>\n    <div class=\"add-todo\">\n         <button type=\"button\" @click=\"$router.push({name : 'main'})\">На главную</button>\n        <form class=\"add-todo__form\" id=\"formElem\">\n            Наименование задачи: <input type=\"text\" v-model=\"form.name\" placeholder=\"введите название\">\n            Описание: <input type=\"text\" v-model=\"form.description\" placeholder=\"опишите задачу\">\n            Статус: \n            <input type=\"radio\" id=\"for_execution\" value=\"К выполнению\" v-model=\"form.status\">  \n            <label for=\"for_execution\">К выполнению</label>\n            <input type=\"radio\" id=\"in_progress\" value=\"В процессе\" v-model=\"form.status\"> \n            <label for=\"in_progress\">В процессе</label>\n            <input type=\"radio\" id=\"done\" value=\"Выполнено\" v-model=\"form.status\"> \n            <label for=\"done\">Выполнено</label>\n            <input type=\"file\" name=\"picture\" id=\"formImage\" accept=\"image/*\" @change=\"showPicture\">\n            <div class=\"add-todo__preview\" id=\"preview\"></div>\n            <button type=\"submit\" class=\"main__button\" @click=\"addTodo\">Добавить задачу</button>\n        </form>\n    </div>\n</template>\n\n<script>\n\nexport default {\n    data() {\n        return {\n            form : {\n                name : \"\",\n                description : \"\",\n                status : \"К выполнению\",\n                img : \"\"\n            },\n            formImage : document.getElementById(\"formImage\"),\n        }\n    },\n    methods : {\n        addTodo() {\n            if (document.getElementById(\"formImage\").files[0]) {\n                this.savePicture();\n                // this.form.img = this.savePicture();\n            }\n            this.$store.commit('ADD_TODO', this.form);\n            this.$router.push({name : 'main'});\n        },\n        showPicture() {\n            const container = document.getElementById('preview');\n            const formImage = document.getElementById(\"formImage\");\n            let file = formImage.files[0];\n            let reader = new FileReader();\n            reader.onload = function (e) {\n                container.innerHTML = `<img src=\"${e.target.result}\" alt=\"photo\">`;\n            }\n            reader.onerror = function(e){\n                alert(`ERROR ${e}`);\n            }\n            reader.readAsDataURL(file);\n        },\n        savePicture() {\n            const formElem = document.getElementById('formElem');\n            const formData = new FormData(formElem);\n            formData.append('user', this.$store.getters.USER);\n            let sendForm = async () => {\n                let response = await fetch('http://localhost:8888/saveFile.php', {\n                    method: 'POST',\n                    body: formData\n                });\n                let result = await response.text();\n                \n                this.form.img = result;\n            }\n            sendForm();\n        }\n    }\n}\n</script>"],"sourceRoot":""}]}